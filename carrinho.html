<!DOCTYPE html>
<html lang="en">
<head>
<title>JGLoot</title> <link rel="shortcut icon" type="image/png" href="https://i.postimg.cc/SQ9jc494/favicon-JG.png"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1"> <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous"> <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script> <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.0/jquery.mask.js"></script>
<style>
body {background-color: #ebebeb;}

.logo {max-width: 80px; float: right; margin-right: 20px}

.voltar {display: none;}

.fc {float: left; margin-top: 10px; margin-left: 40px}

.fundo {background-color: #b81414; width: 100%; top:0; height: 80px; color: white; font-size: 40px; font-weight: 700}

.h2 {color: #b81414}

.carrinho {margin-left: 10%; width: 80%; margin-top: 50px; background-color: #ffffff; padding: 1%; padding-bottom: 20px; border: 2px solid #b81414; border-radius: 5px; height: 100%}

.entrega {display: none; margin-left: 10%; width: 80%; margin-top: 50px; background-color: #ffffff; padding: 1%; padding-bottom: 20px; border: 2px solid #b81414; border-radius: 5px; height: 100%}

input {
      width: 100%;
      padding: 10px;
      margin-bottom: 10px;
      box-sizing: border-box;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    
    .produto-container {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
    }

    .inputs-container {
      margin-left: 10px;
    }  
    
input:focus {
  outline: none;
}
    

img {max-width: 30%}

hr {color: #b81414; border: 1px solid #b81414;}

button {font-size: 20px; background-color: #4CAF50; color: white; padding: 5px 10px; border: none; border-radius: 4px; margin: 10px}

button:hover {background-color: #45a049;}


</style>
</head>
<body onload="carregarPagina()">
<table class="fundo">
<td class="fc">FINALIZAR COMPRA</td>
<td><a href="index.html"><img class="logo" src="https://i.postimg.cc/BbfF2nQ8/logojgloot.png" alt="logo"></a></td>
<td><a href="index.html"><img class="voltar" src="https://i.postimg.cc/ZYgb7Mrc/voltar.png" alt="voltar"></a>
</td>
    </table>
    
  <form id="formulario" action="https://api.sheetmonkey.io/form/uxvqPncPLPexLG3HAgf2K9" method="post">
<table class="carrinho">
    <h2 class="h2">Confirme o pedido</h2>

    <div id="itensCarrinho"></div>
    
<h3>Total: <span id="precoTotalCarrinho">R$</span></h3>
 
    <button id="finalizar">Finalizar compra</button>
</table>


<div id="entrega" class="entrega">
    <h1 class="enderecoparaentrega">ENDEREÇO PARA ENTREGA</h1>

    
    
        <label for="cliente">Nome completo:</label>
        <input class="inputentrega" placeholder="Nome de quem receberá o produto." type="text" id="cliente" name="cliente" required>

        <label for="endereco">Bairro:</label>
        <input class="inputentrega" placeholder="Digite o nome do bairro." type="text" id="bairro" name="bairro" required>

        <label for="cidade">Rua/Travessa/Avenida:</label>
        <input class="inputentrega" placeholder="Digite o nome da rua/travessa/avenida." type="text"  id="rua" name="rua" required>
        
        <label for="cidade">Número:</label>
        <input class="inputentrega" placeholder="Digite o número da sua localidade." type="number" id="numero" name="numero" required>

		<label for="complemento">Ponto de referência (opcional):</label>
        <input class="inputentrega" placeholder="Digite um ponto de referência, escola, igreja, algo próximo." type="text" id="complemento" name="complemento">
        
        <label for="cliente">Número de telefone:</label>
        <input class="inputentrega" placeholder="Para confirmação de pagamento, informações, entre outros..." type="text" id="telefone" name="telefone" maxlength="15" required>
        
        <h6>Após confirmação de pagamento entraremos em contato (pode demorar alguns minutos).</h6>
        
        <input class="inputentrega" type="hidden" name="Created" value="x-sheetmonkey-current-date-time" />
        
        <button class="enviar" type="submit">Enviar</button>
    </div>
  </form>

  <script>
       function getCookie(name) {
            var cookieArray = document.cookie.split(';');
            var cookie = cookieArray.find(c => c.includes(name));
            if (cookie) {
                return parseFloat(cookie.split('=')[1]);
            }
            return null;
        }

document.addEventListener('DOMContentLoaded', function () {
    // Recupera os produtos salvos no localStorage
    var produtosSalvos = JSON.parse(localStorage.getItem('carrinho')) || [];

    // Recupera o novo produto, se houver, e o adiciona à lista de produtos salvos
    var novoProduto = JSON.parse(localStorage.getItem('produto'));
    if (novoProduto) {
        produtosSalvos.push(novoProduto);
        localStorage.setItem('carrinho', JSON.stringify(produtosSalvos)); // Atualiza o localStorage com a lista de produtos atualizada
        localStorage.removeItem('produto'); // Remove o novo produto do localStorage
    }

    // Exibe os produtos na tabela
    var tabela = document.querySelector('.carrinho');
    tabela.innerHTML = ''; // Limpa o conteúdo da tabela

    // Adiciona cada produto à tabela
    produtosSalvos.forEach(function (produto, index) {
        var newRow = document.createElement('tr');
        newRow.innerHTML = `
            <td>${produto.nome}</td>
            <td>${produto.loja}</td>
            <td>${produto.preco}</td>
            <td>${produto.cor}</td>
            <td>${produto.quantidade}</td>
            <td><img src="${produto.img}" alt="Imagem do Produto"></td>
            <td><button class="remover-produto" data-index="${index}">Remover</button></td>
        `;
        tabela.appendChild(newRow);
    });

    // Adiciona um evento de clique a cada botão "Remover"
    document.querySelectorAll('.remover-produto').forEach(function (botao) {
        botao.addEventListener('click', function () {
            var index = parseInt(botao.getAttribute('data-index'));
            produtosSalvos.splice(index, 1); // Remove o produto do array de produtos salvos
            localStorage.setItem('carrinho', JSON.stringify(produtosSalvos)); // Atualiza o localStorage com a lista de produtos atualizada
            tabela.deleteRow(index); // Remove a linha correspondente da tabela
        });
    });
});

  </script>
</body>
</html>
